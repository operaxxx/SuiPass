#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# è¿è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶
echo "ğŸ§ª Running full test suite..."
pnpm test:coverage

# æ£€æŸ¥æ„å»ºæ˜¯å¦æˆåŠŸ
echo "ğŸ—ï¸ Checking build..."
pnpm build

# è¿è¡Œ E2E æµ‹è¯•ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
if [ -f "playwright.config.ts" ]; then
  echo "ğŸ­ Running E2E tests..."
  pnpm test:e2e
fi

echo "âœ… All pre-push checks passed!"